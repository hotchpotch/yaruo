<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Copying repositories - やる夫で学ぶ gitcore-tutorial</title><link href="/yaruo/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" /></head><body><h1>やる夫で学ぶ gitcore-tutorial</h1><div id="content"><h2>Copying repositories</h2><pre><code class="aa">　　　　　　　　　　　／.:.:.　　　　　　　　 ＼
　 　 　 　 　 　 　 /:,:.:.:　 ／　　　ヽ　　　　＼
　　　　　　　　　 /.:.l:.:.:/:/　　　:/ 　&#39;,　:l　　 ヾ`ｰ
　 　 　 　 　 　 /!:.:.|:.: l/　 〃 /　j　}　:|　 　 ﾊ
　　　　　　　　/ｲ:.:.i|:.:.jL∠/_/ | /l.ﾑ_/|　l 　ｌ }　　git リポジトリの情報は全て .git ディレクトリに入っているから
　　　　　　　　　N:.ﾊ:.:.:lｨfｱﾄ/　ﾚ　ｨ=ﾄ | /| ∧j　　 　　 プロジェクトのディレクトリだけで完結している
　　　　　　　　　　ヽﾑ:.} ii;_j　　　　ii;ﾘ ﾙ iﾚヽ.　　　
　 　 　 　 　 　 　 　 `ﾍ:ゝ　　　_ 　 　 小/　　　　　例えば CVS とは違って…リポジトリとワーキングツリーは同じもの
　 　 　 　 　 　 　 　 　 ヾ:{＞､ _　ｨ＜}/|/　　　　　
　　　　　　　　　　 _, ｨr&#39;´ヽ｛ __＿`}　ヽ､_　　　
　　　　　　　　　／| l:|　　　| =＝=|　　 |:lﾞヽ　　　
　　　　　 　 　 /　 | l:ｌ　　　l 　 　 l　　 l::ｌ　l
　　 　 　 　 　 l　　ヽﾊ　 　 l　 　 l　　//　 |


　 　 　　　＿＿＿_
　 　　　／⌒　　⌒＼
　　　／（ ＞） 　（＜）＼　　
　 ／::::::⌒（__人__）⌒::::: ＼ 　CVS なんて石器時代だお！
　 |　　　　/| | | | |　　　　　|　 
　 ＼　 (、`ー―&#39;´,　　 　／
　　　　　 ￣￣￣ 　


　　 　 ,　&#39;´￣￣｀ ｰ-､　　　　　
　　 ／　　 〃&quot; ｀ヽ､　＼　　　　
　 /　/　 ﾊ/　　　　 ＼ﾊﾍ　　　実は .git ディレクトリ以外の場所に情報を格納することもできるんだけど
　 |i │ ｌ |ﾘノ　　　 ｀ヽ}_}ハ.　　そんなことは今考えるべきことじゃないねっ！
　 |i　|　从 ● 　 　 ●ｌ小N　　　
　 |i （|　⊂⊃ ､_,､_,　⊂lｉ|ノ　　 　
　 | i⌒ヽ j　　（_.ノ 　　ﾉi|__／⌒)　
　 | ヽ 　ヽx＞､ __,　イｌ　|::::ヽ／.　 
　 |　∧__,ﾍ}::ﾍ三|:::::/ｌ|　|&#39;,:::::ﾊ　　
　 |　ヾ_:::ッﾘ :::∨:／　|　| &gt;&#39;&#39;&#39;´


　 　　　＿＿＿_　　
　　　／　　 　 　＼
　 ／　　─　 　 ─＼　
／ 　　 （●） 　（●） ＼　つまりプロジェクトのディレクトリを消したら
|　 　　 　 （__人__）　 　 |　　本当に全て無くなってしまうということかお…ちょっと怖いお
/　　　　 ∩ノ ⊃　　／
(　 ＼　／ ＿ノ　|　 |
.＼　“　　／＿＿|　 | 　
　　＼ ／＿＿＿ ／ 　 
</code></pre>

<pre><code>$ rm -rf git-tutorial
</code></pre>

<pre><code class="aa">　　 　 ,　&#39;´￣￣｀ ｰ-､　　　　　
　　 ／　　 〃&quot; ｀ヽ､　＼　　　　
　 /　/　 ﾊ/　　　　 ＼ﾊﾍ　　　プロジェクトのコピーもディレクトリのコピーだけでできるんだよっ
　 |i │ ｌ |ﾘノ　　　 ｀ヽ}_}ハ.　　
　 |i　|　从 ● 　 　 ●ｌ小N　　　
　 |i （|　⊂⊃ ､_,､_,　⊂lｉ|ノ　　 　
　 | i⌒ヽ j　　（_.ノ 　　ﾉi|__／⌒)　
　 | ヽ 　ヽx＞､ __,　イｌ　|::::ヽ／.　 
　 |　∧__,ﾍ}::ﾍ三|:::::/ｌ|　|&#39;,:::::ﾊ　　
　 |　ヾ_:::ッﾘ :::∨:／　|　| &gt;&#39;&#39;&#39;´
</code></pre>

<pre><code>$ cp -a git-tutorial new-git-tutorial. 
</code></pre>

<pre><code class="aa">　　　　　　　　　　　／.:.:.　　　　　　　　 ＼
　 　 　 　 　 　 　 /:,:.:.:　 ／　　　ヽ　　　　＼
　　　　　　　　　 /.:.l:.:.:/:/　　　:/ 　&#39;,　:l　　 ヾ`ｰ
　 　 　 　 　 　 /!:.:.|:.: l/　 〃 /　j　}　:|　 　 ﾊ
　　　　　　　　/ｲ:.:.i|:.:.jL∠/_/ | /l.ﾑ_/|　l 　ｌ }　　インデックスにはファイルの stat 情報も含まれているから
　　　　　　　　　N:.ﾊ:.:.:lｨfｱﾄ/　ﾚ　ｨ=ﾄ | /| ∧j　　 　　 プロジェクトを移動・コピーしたときは
　　　　　　　　　　ヽﾑ:.} ii;_j　　　　ii;ﾘ ﾙ iﾚヽ.　　　インデックスを更新する必要がある
　 　 　 　 　 　 　 　 `ﾍ:ゝ　　　_ 　 　 小/　　　　　
　 　 　 　 　 　 　 　 　 ヾ:{＞､ _　ｨ＜}/|/　　　　　
　　　　　　　　　　 _, ｨr&#39;´ヽ｛ __＿`}　ヽ､_　　　
　　　　　　　　　／| l:|　　　| =＝=|　　 |:lﾞヽ　　　
　　　　　 　 　 /　 | l:ｌ　　　l 　 　 l　　 l::ｌ　l
　　 　 　 　 　 l　　ヽﾊ　 　 l　 　 l　　//　 |



　　 　　 ＿__　　　　━┓
　　　 ／　―＼ 　　┏┛
　　／ノ　　(●)＼　 ・
.　｜　(●) 　 ⌒）＼　パーミッションとかのことかお？
.　｜　　 （__ノ￣　　|　とりあえず言われた通りにやっとくお
　　＼　　　　　　　 /
　　　 ＼　　　　 _ノ
　　　　/´　　 　 ｀＼
　　 　 |　　　　　　　|
　　 　 |　　　　　　　|
</code></pre>

<pre><code>$ git update-index --refresh
</code></pre>

<pre><code class="aa">　　 　 ,　&#39;´￣￣｀ ｰ-､　　　　　
　　 ／　　 〃&quot; ｀ヽ､　＼　　　　
　 /　/　 ﾊ/　　　　 ＼ﾊﾍ　　　プロジェクトのコピーは別々のマシン間でも同じようにできるんだよっ
　 |i │ ｌ |ﾘノ　　　 ｀ヽ}_}ハ.　　その場合、インデックスがどうなってるか分からないから
　 |i　|　从 ● 　 　 ●ｌ小N　　　一度リセットするのがオススメにょろ
　 |i （|　⊂⊃ ､_,､_,　⊂lｉ|ノ　　 　
　 | i⌒ヽ j　　（_.ノ 　　ﾉi|__／⌒)　
　 | ヽ 　ヽx＞､ __,　イｌ　|::::ヽ／.　 
　 |　∧__,ﾍ}::ﾍ三|:::::/ｌ|　|&#39;,:::::ﾊ　　
　 |　ヾ_:::ッﾘ :::∨:／　|　| &gt;&#39;&#39;&#39;´
</code></pre>

<pre><code>$ git read-tree --reset HEAD
$ git update-index --refresh
</code></pre>

<pre><code class="aa">　　　　　　　　　　　／.:.:.　　　　　　　　 ＼
　 　 　 　 　 　 　 /:,:.:.:　 ／　　　ヽ　　　　＼
　　　　　　　　　 /.:.l:.:.:/:/　　　:/ 　&#39;,　:l　　 ヾ`ｰ
　 　 　 　 　 　 /!:.:.|:.: l/　 〃 /　j　}　:|　 　 ﾊ
　　　　　　　　/ｲ:.:.i|:.:.jL∠/_/ | /l.ﾑ_/|　l 　ｌ }　　これでインデックスの内容が HEAD と同じになる
　　　　　　　　　N:.ﾊ:.:.:lｨfｱﾄ/　ﾚ　ｨ=ﾄ | /| ∧j　　 　　 ちなみにこれは git-reset で代用できる
　　　　　　　　　　ヽﾑ:.} ii;_j　　　　ii;ﾘ ﾙ iﾚヽ.　　　
　 　 　 　 　 　 　 　 `ﾍ:ゝ　　　_ 　 　 小/　　　　　
　 　 　 　 　 　 　 　 　 ヾ:{＞､ _　ｨ＜}/|/　　　　　
　　　　　　　　　　 _, ｨr&#39;´ヽ｛ __＿`}　ヽ､_　　　
　　　　　　　　　／| l:|　　　| =＝=|　　 |:lﾞヽ　　　
　　　　　 　 　 /　 | l:ｌ　　　l 　 　 l　　 l::ｌ　l
　　 　 　 　 　 l　　ヽﾊ　 　 l　 　 l　　//　 |
</code></pre>

<pre><code>$ git reset
</code></pre>

<pre><code class="aa">　 　 　　　＿＿＿_
　 　　　／⌒　　⌒＼ ﾎｼﾞﾎｼﾞ
　　　／（ ●） 　（●）＼
　 ／::::::⌒（__人__）⌒::::: ＼ 　簡単なほうのコマンドだけ教えてくれれば十分だお
　 |　　　 ｍj |ー&#39;´　　　　　 |
　 ＼　 〈＿_ﾉ　　　　　 　／
　　　　ノ　　ﾉ
</code></pre>

<pre><code class="aa">　　　　　　　　　　　／.:.:.　　　　　　　　 ＼
　 　 　 　 　 　 　 /:,:.:.:　 ／　　　ヽ　　　　＼
　　　　　　　　　 /.:.l:.:.:/:/　　　:/ 　&#39;,　:l　　 ヾ`ｰ
　 　 　 　 　 　 /!:.:.|:.: l/　 〃 /　j　}　:|　 　 ﾊ
　　　　　　　　/ｲ:.:.i|:.:.jL∠/_/ | /l.ﾑ_/|　l 　ｌ }　　…公開されている git リポジトリのほとんどが
　　　　　　　　　N:.ﾊ:.:.:lｨfｱﾄ/　ﾚ　ｨ=ﾄ | /| ∧j　　 　　 実際のファイルではなく .git ディレクトリを公開している
　　　　　　　　　　ヽﾑ:.} ii;_j　　　　ii;ﾘ ﾙ iﾚヽ.　　　そういうリポジトリをコピーするにはこうすればいい
　 　 　 　 　 　 　 　 `ﾍ:ゝ　　　_ 　 　 小/　　　　　
　 　 　 　 　 　 　 　 　 ヾ:{＞､ _　ｨ＜}/|/　　　　　
　　　　　　　　　　 _, ｨr&#39;´ヽ｛ __＿`}　ヽ､_　　　
　　　　　　　　　／| l:|　　　| =＝=|　　 |:lﾞヽ　　　
　　　　　 　 　 /　 | l:ｌ　　　l 　 　 l　　 l::ｌ　l
　　 　 　 　 　 l　　ヽﾊ　 　 l　 　 l　　//　 |
</code></pre>

<pre><code>$ mkdir my-git
$ cd my-git
$ rsync -rL rsync://rsync.kernel.org/pub/scm/git/git.git/ .git
$ git read-tree HEAD
</code></pre>

<pre><code class="aa">　 　　　／⌒　　⌒＼
　　　／（ ●） 　（●）＼　　とりあえず .git ディレクトリを作って
　 ／::::::⌒（__人__）⌒::::: ＼　インデックスを HEAD と同期してるんだお！
　 |　　　　　|r┬-|　　　　　|　
　 ＼ 　　 　 `ー&#39;´ 　 　 ／
</code></pre>

<pre><code>$ git checkout-index -u -a
</code></pre>

<pre><code class="aa">　　 　 ,　&#39;´￣￣｀ ｰ-､　　　　　
　　 ／　　 〃&quot; ｀ヽ､　＼　　　　上のコマンドでワーキングツリーにファイルをチェックアウトできるよ！
　 /　/　 ﾊ/　　　　 ＼ﾊﾍ　　　-u はあとから git update-index --refresh しなくていいようにインデックスを最新に保つ
　 |i │ ｌ |ﾘノ　　　 ｀ヽ}_}ハ.　　-a は全部のファイルをチェックアウトするオプションなのさっ
　 |i　|　从 ● 　 　 ●ｌ小N　　　
　 |i （|　⊂⊃ ､_,､_,　⊂lｉ|ノ　　 　
　 | i⌒ヽ j　　（_.ノ 　　ﾉi|__／⌒)　
　 | ヽ 　ヽx＞､ __,　イｌ　|::::ヽ／.　 
　 |　∧__,ﾍ}::ﾍ三|:::::/ｌ|　|&#39;,:::::ﾊ　　
　 |　ヾ_:::ッﾘ :::∨:／　|　| &gt;&#39;&#39;&#39;´


　 　　　＿＿＿_
　　　／　　 　 　＼ （ ;;;;(
　 ／　　＿ノ　 ヽ__＼) ;;;;)
／ 　　 （─） 　（─ /;;／
|　 　　 　 （__人__） l;;,´　これだけまわりくどいという事は
/　　　 　 ∩ ノ)━・&#39;／　　　　必ずもっと簡単なコマンドがあるはずだお…
(　 ＼　／ ＿ノ´.|　 |
.＼　 &quot; 　／＿＿|　 |
　　＼ ／＿＿＿ ／


　　　　　　　　　　　／.:.:.　　　　　　　　 ＼
　 　 　 　 　 　 　 /:,:.:.:　 ／　　　ヽ　　　　＼
　　　　　　　　　 /.:.l:.:.:/:/　　　:/ 　&#39;,　:l　　 ヾ`ｰ
　 　 　 　 　 　 /!:.:.|:.: l/　 〃 /　j　}　:|　 　 ﾊ
　　　　　　　　/ｲ:.:.i|:.:.jL∠/_/ | /l.ﾑ_/|　l 　ｌ }　　…ある…
　　　　　　　　　N:.ﾊ:.:.:lｨfｱﾄ/　ﾚ　ｨ=ﾄ | /| ∧j　　 　　 
　　　　　　　　　　ヽﾑ:.} ii;_j　　　　ii;ﾘ ﾙ iﾚヽ.　　　
　 　 　 　 　 　 　 　 `ﾍ:ゝ　　　_ 　 　 小/　　　　　
　 　 　 　 　 　 　 　 　 ヾ:{＞､ _　ｨ＜}/|/　　　　　
　　　　　　　　　　 _, ｨr&#39;´ヽ｛ __＿`}　ヽ､_　　　
　　　　　　　　　／| l:|　　　| =＝=|　　 |:lﾞヽ　　　
　　　　　 　 　 /　 | l:ｌ　　　l 　 　 l　　 l::ｌ　l
　　 　 　 　 　 l　　ヽﾊ　 　 l　 　 l　　//　 |
</code></pre>

<pre><code>$ git clone rsync://rsync.kernel.org/pub/scm/git/git.git/ my-git
$ cd my-git
$ git checkout
</code></pre>

<pre><code class="aa">　　　　　　　　　＿＿＿
　　　　　　　／ ⌒　　⌒＼
　　　　　 ／　（⌒）　 （⌒） ＼　　　
　　　　／ 　 ///（__人__）/// ＼　　
　　 　 |　　 u. 　 `Y⌒y&#39;´　　　 |　　さすが git だお！
　 　 　 ＼ 　 　 　 ﾞー ′　　,／ 　　うちに来て妹をファックしていいお！
　　　 　 /⌒ヽ　 　ー‐ 　 　ｨヽ　　　
　 　 　 / rｰ&#39;ゝ　　　　　　　〆ヽ 　　
　　　　/,ﾉヾ　,&gt;　　　　　　ヾ_ノ,|
　　　　|　ヽ〆　　　　　　　　|´　|



　　 　 ,　&#39;´￣￣｀ ｰ-､　　　　　
　　 ／　　 〃&quot; ｀ヽ､　＼　　　　ちなみにさっき私が clone しようとしたら失敗したにょろ
　 /　/　 ﾊ/　　　　 ＼ﾊﾍ　　　そういう場合は git clone git://github.com/hotchpotch/yaruo.git でもしてればいいのさっ
　 |i │ ｌ |ﾘノ　　　 ｀ヽ}_}ハ.　　
　 |i　|　从 ● 　 　 ●ｌ小N　　　次はやっとブランチの作成だよ！
　 |i （|　⊂⊃ ､_,､_,　⊂lｉ|ノ　　 　
　 | i⌒ヽ j　　（_.ノ 　　ﾉi|__／⌒)　
　 | ヽ 　ヽx＞､ __,　イｌ　|::::ヽ／.　 
　 |　∧__,ﾍ}::ﾍ三|:::::/ｌ|　|&#39;,:::::ﾊ　　
　 |　ヾ_:::ッﾘ :::∨:／　|　| &gt;&#39;&#39;&#39;´
</code></pre>
</div><script>for (var aas = document.querySelectorAll('.aa'), i = 0, aa = aas[i]; aa = aas[i++]; ) aa.className = 'textar-aa'; </script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-34276254-3', 'motemen.github.io'); ga('send', 'pageview'); </script></body></html>
